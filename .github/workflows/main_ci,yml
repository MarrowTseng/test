# 1. 工作流程的名稱
name: CI/CD 測試與部署

# 2. 定義觸發條件
# 當程式碼被推送到 main 分支時觸發
on:
  push:
    branches: [ main ]
  # 也可以設定為手動觸發 (會在 Actions 頁面出現 "Run workflow" 按鈕)
  workflow_dispatch:

# 3. 定義一個或多個任務
jobs:
  # 任務名稱：build_and_test
  build_and_test:
    # 任務 1.1：指定運行環境
    runs-on: ubuntu-latest
    
    # 任務 1.2：定義一系列步驟
    steps:
    
    # 步驟 1：檢出代碼 (使用官方 Action: actions/checkout)
    - name: Checkout code
      uses: actions/checkout@v4

    # 步驟 2：設置 Node.js 環境
    - name: Set up Node.js environment
      uses: actions/setup-node@v4
      with:
        node-version: '20' # 指定使用的 Node.js 版本

    # 步驟 3：安裝專案依賴 (使用 shell 命令: run)
    - name: Install dependencies
      run: npm install

    # 步驟 4：執行測試 (使用 shell 命令: run)
    - name: Run tests
      run: npm test
      # 如果 npm test 執行失敗，則此 Job 會失敗

      - name: Run tests
      run: echo "Hello, GitHub Actions!"
